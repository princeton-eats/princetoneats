<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find Meals - Princeton Eats</title>
    <link rel="stylesheet" href="/static/css/find_meals.css">
</head>
<body>
    <nav class="navbar">
        <h1 class="logo">Princeton Eats</h1>
        <div class="nav-links">
            <a href="/">Home</a>
            <a href="#">Sign In</a>
        </div>
    </nav>

    <div class="container">
        <div class="preferences-box">
            <h2>Select Your Preferences</h2>
            <hr class="line">
            <form id="mealForm">
                <div class="checkbox-group">
                    <h4>Select Restrictions</h4>
                    <label><input type="checkbox" name="ARfilter" value="vegan"> Vegan</label>
                    <label><input type="checkbox" name="ARfilter" value="vegetarian"> Vegetarian</label>
                    <label><input type="checkbox" name="ARfilter" value="halal"> Halal</label>
                    <label><input type="checkbox" name="ARfilter" value="gluten-free"> Gluten Free</label>
                    <label><input type="checkbox" name="ARfilter" value="dairy-free"> Dairy Free</label>
                    <label><input type="checkbox" name="ARfilter" value="peanut-free"> Peanut Allergy</label>
                    <label><input type="checkbox" name="ARfilter" value="other"> More...</label>
                </div>
            </form>

            <form id="dinningHall">
                <div class="checkbox-group">
                    <h4>Select Dinning Hall</h4>
                    <label><input type="checkbox" name="DHfilter" value="CJL">Center for Jewish Life</label>
                    <label><input type="checkbox" name="DHfilter" value="Forbes"> Forbes College</label>
                    <label><input type="checkbox" name="DHfilter" value="Grad"> Graduate College</label>
                    <label><input type="checkbox" name="DHfilter" value="Roma"> Rocky-Mathey College</label>
                    <label><input type="checkbox" name="DHfilter" value="WB"> Whitman-Butler College</label>
                    <label><input type="checkbox" name="DHfilter" value="YN"> Yeh-New College West</label>

                    <h4>Select Meal Time</h4>
                    <label><input type="checkbox" name="MTfilter" value="Breakfast"> Breakfast</label>
                    <label><input type="checkbox" name="MTfilter" value="Lunch"> Lunch</label>
                    <label><input type="checkbox" name="MTfilter" value="Dinner"> Dinner</label>

                    <!-- <input type="submit" id="submitButton" value="Save" style="margin-top: 5px; margin-left: 65px;"> -->
                </div>
            </form>

            <div class="buttons">
                <button id="enterButton">Enter</button>
                <button onclick="location.href='/'">Back</button>
            </div>
        </div>
    </div>

    <footer>
        <p>Made by <span class="names">Achilles, Adham, Akuei, Ndongo, and Yusuf</span></p>
    </footer>

    <script>
        document.getElementById("enterButton").addEventListener("click", function() {
            let form = document.getElementById("dinningHall");
            let formData = new FormData(form);

            let DH = [];
            let MT = [];

            formData.getAll("DHfilter").forEach(value => DH.push(value));
            formData.getAll("MTfilter").forEach(value => MT.push(value));

            let queryString = `?DHfilter=${DH.join(",")}&MTfilter=${MT.join(",")}`;
            window.location.href = "/meals_list" + queryString;
        });
    </script>
</body>
</html>
